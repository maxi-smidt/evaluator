<h3 class="mb-3">{{ exercise.name }}</h3>

<p-accordion [multiple]="true" [activeIndex]="[0]">
  <p-accordionTab *ngFor="let group of groupNrs">
    <ng-template pTemplate="header">
      <span class="font-bold white-space-nowrap">{{ 'course.courseView.group' | translate }} {{ group }}</span>
    </ng-template>

    <p-table [rowHover]="true" [columns]="cols" [value]="exercise.studentExercises[group]"
             [tableStyle]="{ 'min-width': '50rem' }">
      <ng-template pTemplate="header" let-columns>
        <tr>
          <th *ngFor="let col of columns">
            {{ col.header }}
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-columns="columns">
        <tr>
          <td *ngFor="let col of columns">
            <ng-container *ngIf="col.field === 'state'; else otherFields">
              <p-tag [severity]="getSeverity(rowData[col.field])">{{ rowData[col.field] }}</p-tag>
            </ng-container>

            <ng-template #otherFields>
              <ng-container *ngIf="col.field === 'action'; else defaultFields">
                <button mat-icon-button
                        *ngIf="rowData['state'] === 'other'"
                        (click)="notSubmittedAction()">
                  <mat-icon>event_busy</mat-icon>
                </button>

                <button mat-icon-button
                        *ngIf="rowData['state'] === 'in progress' || rowData['state'] === 'completed'"
                        (click)="editAction()">
                  <mat-icon>edit</mat-icon>
                </button>

                <button mat-icon-button
                        *ngIf="rowData['state'] !== 'other'"
                        (click)="deleteAction()">
                  <mat-icon>delete</mat-icon>
                </button>

                <button mat-icon-button
                        *ngIf="rowData['state'] === 'completed'"
                        (click)="downloadAction()">
                  <mat-icon>download</mat-icon>
                </button>
              </ng-container>
              <ng-template #defaultFields>


              </ng-template>
              {{ rowData[col.field] }}
            </ng-template>
          </td>
        </tr>
      </ng-template>
    </p-table>

  </p-accordionTab>
</p-accordion>


