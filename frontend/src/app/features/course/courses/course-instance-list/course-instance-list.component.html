<p-confirmPopup/>

<h2>{{ 'degree-program.courses-view.course-instances' | translate }}</h2>

<p-accordion class="w-full" expandIcon="pi pi-plus" collapseIcon="pi pi-minus">
  @for (obj of sortedCourses; track obj.course.id) {
    <p-accordionTab>
      <ng-template pTemplate="header">
        <div class="d-flex align-items-center w-100">
          <span class="font-bold white-space-nowrap">
            {{ obj.course.name }}
          </span>
          <div class="ms-auto me-3">
            <p-badge value="{{ obj.courseInstances.length }}" class="me-2"/>
          </div>
        </div>
      </ng-template>

      <div class="grid grid-nogutter border border-2 rounded-1">
        @for (courseInstance of obj.courseInstances; track courseInstance.id) {
          <div class="col-12 hover border border-1">
            <div class="d-flex p-2 gap-3 align-items-center">
              <h5 class="ms-1 mb-0">{{ courseInstance.course.abbreviation }}</h5>
              <p-tag value="{{ courseInstance.year }}" [rounded]="true"
                     [severity]="$index === 0 ? 'success' : 'info'"/>
              <div class="d-flex ms-auto gap-2">
                <p-button icon="pi pi-times" severity="danger" size="small"
                          (onClick)="onDeleteCourseInstance($event, courseInstance.id)"/>
                <p-button icon="pi pi-arrow-right" size="small"
                          (onClick)="routeToCourseInstanceEdit(courseInstance.id)"/>
              </div>
            </div>
          </div>
        }
      </div>
    </p-accordionTab>
  }
</p-accordion>
